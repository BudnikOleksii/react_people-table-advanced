(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{24:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var a,c=n(13),r=n(5),s=n(2),o=(n(23),n(24),n(0)),l=function(){return Object(o.jsx)("h1",{className:"title",children:"Page not found"})},i=function(){return Object(o.jsx)("h1",{className:"title",children:"Home page"})},j=n(1),b=n(8),u=n(4),d=n(14),h=n.n(d),m=n(7),p=n.n(m),O=function(e){var t=e.person,n=t.slug,a=t.sex,c=t.name,l=Object(s.f)().search;return Object(o.jsx)(r.b,{to:{pathname:"/people/".concat(n),search:"".concat(l)},style:"f"===a?{color:"rgb(255, 0, 0)"}:{color:"rgb(0, 71, 171)"},children:c})},x=function(e){var t=e.person,n=t.slug,a=t.sex,c=t.born,r=t.died,l=t.fatherName,i=t.motherName,j=t.mother,b=t.father,u=Object(s.h)();return Object(o.jsxs)("tr",{"data-cy":"person",className:p()({"has-background-warning":u.slug===n}),children:[Object(o.jsx)("td",{children:Object(o.jsx)(O,{person:t})}),Object(o.jsx)("td",{children:a}),Object(o.jsx)("td",{children:c}),Object(o.jsx)("td",{children:r}),Object(o.jsx)("td",{children:j?Object(o.jsx)(O,{person:j}):Object(o.jsx)("p",{style:{fontWeight:"bold"},children:i||"-"})}),Object(o.jsx)("td",{children:b?Object(o.jsx)(O,{person:b}):Object(o.jsx)("p",{style:{fontWeight:"bold"},children:l||"-"})})]},n)},f=(n(26),n(11));!function(e){e.Name="name",e.Sex="sex",e.Born="born",e.Died="died"}(a||(a={}));var g=function(e){var t=e.people,n=Object(r.d)(),c=Object(u.a)(n,2),s=c[0],l=c[1],i=s.get("query")||"",d=Object(j.useState)(i),m=Object(u.a)(d,2),O=m[0],g=m[1],v=s.get("sortBy")||"",N=s.get("sortOrder")||"",y=Object(j.useCallback)(h()((function(e){l(e||v||N?{query:e,sortBy:v,sortOrder:N}:{})}),500),[v,N]),w=Object(j.useMemo)((function(){var e=function(e,t){var n=t.toLowerCase();return e.filter((function(e){return(e.name+e.motherName+e.fatherName).toLowerCase().includes(n)}))}(t,i);return function(e,t,n){var c=Object(f.a)(e),r="asc"===t?1:-1;switch(n){case a.Name:case a.Sex:c.sort((function(e,t){return e[n].localeCompare(t[n])*r}));break;case a.Born:case a.Died:c.sort((function(e,t){return(e[n]-t[n])*r}))}return c}(e,N,v)}),[i,v,N]);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"inputs-block is-flex is-flex-direction-column m-auto",children:[Object(o.jsx)(r.b,{className:"button is-primary is-rounded m-2",to:"/people/new",children:"Add a new person"}),Object(o.jsx)("input",{type:"text",className:"input is-primary is-rounded m-2",placeholder:"Search",value:O,onChange:function(e){g(e.target.value),y(e.target.value)}})]}),Object(o.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[["Name","Sex","Born","Died"].map((function(e){return Object(o.jsx)("th",{className:p()("PeopleTable__header-row sort-arrow",Object(b.a)({},"sort-arrow--".concat(N),v===e.toLowerCase())),onClick:function(){return function(e){var t=N;v!==e&&(t="desc"),l({query:i,sortBy:e,sortOrder:"asc"===t?"desc":"asc"})}(e.toLowerCase())},children:e},e)})),Object(o.jsx)("th",{children:"Mother"}),Object(o.jsx)("th",{children:"Father"})]})}),Object(o.jsx)("tbody",{children:w.map((function(e){return Object(o.jsx)(x,{person:e},e.slug)}))})]})]})},v=n(6);function N(){return(e=500,new Promise((function(t){return setTimeout(t,e)}))).then((function(){return fetch("https://mate-academy.github.io/react_people-table/api/people.json")})).then((function(e){return e.json()}));var e}var y=Object(j.createContext)({people:[],setPeople:function(){},errorMessage:""}),w=function(e){var t=e.children,n=Object(j.useState)([]),a=Object(u.a)(n,2),c=a[0],r=a[1],s=Object(j.useState)(""),l=Object(u.a)(s,2),i=l[0],b=l[1];Object(j.useEffect)((function(){N().then((function(e){var t=e.map((function(e,t,n){return Object(v.a)(Object(v.a)({},e),{},{mother:n.find((function(t){return t.name===e.motherName})),father:n.find((function(t){return t.name===e.fatherName}))})}));r(t)})).catch(b)}),[]);var d={people:c,setPeople:r,errorMessage:i};return Object(o.jsx)(y.Provider,{value:d,children:t})},C=function(){var e=Object(j.useContext)(y),t=e.people,n=e.errorMessage;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h1",{className:"title",children:"People Page"}),Object(o.jsx)("div",{className:"block",children:Object(o.jsxs)("div",{className:"box table-container",children:[n&&Object(o.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"}),!n&&0===t.length&&Object(o.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}),t.length>0&&Object(o.jsx)(g,{people:t})]})})]})},k=function(){return Object(o.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)("div",{className:"navbar-brand",children:[Object(o.jsx)(r.c,{className:function(e){var t=e.isActive;return p()("navbar-item",{"has-background-grey-lighter":t})},to:"/",children:"Home page"}),Object(o.jsx)(r.c,{className:function(e){var t=e.isActive;return p()("navbar-item",{"has-background-grey-lighter":t})},to:"people",children:"People page"})]})})})},P=(n(27),{name:"",sex:"",born:0,died:0,fatherName:"",motherName:"",slug:""}),S=Object(j.memo)((function(){var e=Object(j.useContext)(y),t=e.people,n=e.setPeople,a=Object(j.useState)(P),c=Object(u.a)(a,2),r=c[0],l=c[1],i=Object(j.useState)(""),d=Object(u.a)(i,2),h=d[0],m=d[1],p=Object(s.g)(),O=Object(j.useMemo)((function(){return t.filter((function(e){return"m"===e.sex}))}),t),x=Object(j.useMemo)((function(){return t.filter((function(e){return"f"===e.sex}))}),t),g=function(e,t){m(""),l(Object(v.a)(Object(v.a)({},r),{},Object(b.a)({},e,t)))};return Object(o.jsxs)("form",{className:"form",onSubmit:function(e){if(e.preventDefault(),/[^a-zA-Z ]/g.test(r.name)?(m("Name should contain only letters and spaces"),0):!(r.died-r.born>150)||(m("died - born should be >= 0 and < 150"),0)){var a=r.name,c=r.born,s=Object(v.a)(Object(v.a)({},r),{},{slug:"".concat(a.split(" ").join("-"),"-").concat(c)});n([].concat(Object(f.a)(t),[s])),l(P),p("/people/")}},children:[h&&Object(o.jsx)("div",{className:"notification  is-danger",children:h}),Object(o.jsx)("label",{className:"field",children:Object(o.jsx)("input",{className:"input",type:"text",placeholder:"Name",required:!0,value:r.name,onChange:function(e){g("name",e.target.value)}})}),Object(o.jsxs)("div",{className:"control",children:[Object(o.jsxs)("label",{className:"radio",children:["Male",Object(o.jsx)("input",{required:!0,type:"radio",name:"sex",value:"m",checked:"m"===r.sex,onChange:function(e){return g("sex",e.target.value)},className:"radio"})]}),Object(o.jsxs)("label",{className:"radio",children:["Female",Object(o.jsx)("input",{required:!0,type:"radio",name:"sex",value:"f",checked:"f"===r.sex,onChange:function(e){return g("sex",e.target.value)},className:"radio"})]})]}),Object(o.jsxs)("label",{className:"field",children:["Born",Object(o.jsx)("input",{type:"number",placeholder:"Born year",value:r.born,min:1400,max:(new Date).getFullYear(),onChange:function(e){g("born",Number(e.target.value))},className:"input"})]}),Object(o.jsxs)("label",{className:"field",children:["Died",Object(o.jsx)("input",{type:"number",placeholder:"Death year",value:r.died,min:r.born,max:(new Date).getFullYear(),onChange:function(e){g("died",Number(e.target.value))},className:"input",disabled:!r.born})]}),Object(o.jsx)("label",{className:"select",children:Object(o.jsxs)("select",{value:r.fatherName,onChange:function(e){g("fatherName",e.target.value)},children:[Object(o.jsx)("option",{value:"",disabled:!0,children:"Choose a father"}),O.map((function(e){var t=e.name,n=e.slug;return Object(o.jsx)("option",{value:t,children:t},n)}))]})}),Object(o.jsx)("label",{className:"select",children:Object(o.jsxs)("select",{value:r.motherName,onChange:function(e){g("motherName",e.target.value)},children:[Object(o.jsx)("option",{value:"",disabled:!0,children:"Choose a mother"}),x.map((function(e){var t=e.name,n=e.slug;return Object(o.jsx)("option",{value:t,children:t},n)}))]})}),Object(o.jsx)("button",{className:"button is-primary",type:"submit",disabled:!r.name||!r.sex||!r.born,children:"Add a new person"})]})})),B=function(){return Object(o.jsx)(w,{children:Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(k,{}),Object(o.jsxs)(s.d,{children:[Object(o.jsx)(s.b,{path:"/",element:Object(o.jsx)(i,{})}),Object(o.jsx)(s.b,{path:"home",element:Object(o.jsx)(s.a,{to:"/",replace:!0})}),Object(o.jsx)(s.b,{path:"people",element:Object(o.jsx)(C,{}),children:Object(o.jsx)(s.b,{path:":slug",element:Object(o.jsx)(C,{})})}),Object(o.jsx)(s.b,{path:"people/new",element:Object(o.jsx)(S,{})}),Object(o.jsx)(s.b,{path:"*",element:Object(o.jsx)(l,{})})]})]})})};Object(c.createRoot)(document.getElementById("root")).render(Object(o.jsx)(r.a,{children:Object(o.jsx)(B,{})}))}},[[28,1,2]]]);
//# sourceMappingURL=main.3ebb8a64.chunk.js.map